"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4354],{49354:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>h});var i=n(11527),o=n(63883);const r={},s="Event Fetching",c={id:"protocol/js-ceramic/networking/event-fetching",title:"Event Fetching",description:"Once a tip is discovered through the Tip Gossip or Tip Query protocols a node knows both the StreamID and the latest event CID of the stream. The latest Event contains the CID of the prev Event and so on until the Init Event is found in the event log. The Init Event's CID is also in the StreamID. This is proof that the tip is part of the stream identified by the StreamId.",source:"@site/docs/protocol/js-ceramic/networking/event-fetching.md",sourceDirName:"protocol/js-ceramic/networking",slug:"/protocol/js-ceramic/networking/event-fetching",permalink:"/docs/protocol/js-ceramic/networking/event-fetching",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"protocol",previous:{title:"Tip Queries",permalink:"/docs/protocol/js-ceramic/networking/tip-queries"},next:{title:"Data Feed API",permalink:"/docs/protocol/js-ceramic/networking/data-feed-api"}},a={},h=[];function d(e){const t={a:"a",code:"code",h1:"h1",p:"p",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"event-fetching",children:"Event Fetching"}),"\n",(0,i.jsxs)(t.p,{children:["Once a tip is discovered through the ",(0,i.jsx)(t.a,{href:"/docs/protocol/js-ceramic/networking/tip-queries",children:"Tip Gossip"})," or ",(0,i.jsx)(t.a,{href:"/docs/protocol/js-ceramic/networking/tip-queries",children:"Tip Query"})," protocols a node knows both the StreamID and the latest event CID of the stream. The latest Event contains the CID of the ",(0,i.jsx)(t.code,{children:"prev"})," Event and so on until the Init Event is found in the event log. The Init Event's CID is also in the StreamID. This is proof that the tip is part of the stream identified by the StreamId."]}),"\n",(0,i.jsxs)(t.p,{children:["The tip is one of ",(0,i.jsx)(t.a,{href:"/docs/protocol/js-ceramic/streams/event-log",children:"Init, Data, or Time Event"}),". If the tip CID is the initial event CID then the stream has never been updated and the initial event is the complete event log. If the tip CID points to a Data, or Time event then that event will contain a ",(0,i.jsx)(t.code,{children:"prev"})," field with a CID link to its previous event. IPFS can be used to retrieve this event. Similarly you can use IPFS to recursively fetch and resolve every ",(0,i.jsx)(t.code,{children:"prev"})," event in an event log until reaching the initial event. At that point you have retrieved and synced the entire stream."]}),"\n",(0,i.jsxs)(t.p,{children:["Fetching an event with IPFS from a peer both relies on ",(0,i.jsx)(t.a,{href:"https://docs.ipfs.tech/concepts/bitswap/",children:"IPFS BitSwap"})," and the ",(0,i.jsx)(t.a,{href:"https://docs.ipfs.tech/concepts/dht/",children:"IPFS DHT"}),"."]})]})}function p(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},63883:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>s});var i=n(50959);const o={},r=i.createContext(o);function s(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);